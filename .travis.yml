language: objective-c
osx_image: xcode11.3

xcode_workspace: Swindler.xcworkspace
xcode_scheme: Swindler

script:
  - swift test
  - swift build --target SwindlerExample
env:
  - SWIFT_VERSION=5.1

matrix:
  include:
    - osx_image: xcode10.2
      env: DEPLOY_ENABLED=1
    - osx_image: xcode10.1
    - osx_image: xcode10
    - osx_image: xcode9.4

deploy:
  - provider: script
    script: bash .scripts/update-gh-pages.sh
    skip_cleanup: true
    on:
        all_branches: true
        condition: '"$DEPLOY_ENABLED" == 1 && ("$TRAVIS_BRANCH" == "master" || "$TRAVIS_TAG" != "")'
